---
title: PLSQL01
toc: true
toc_sticky: true
toc_label: "Contents of Page"

categories:
  - Study
tags:
  - SQL_Study
---

<br><br>

# PL/SQL
## 절차적 언어 : PL
* 처리방법과 순서가 있는 언어. C, Java 등이 절차적 언어이다.
* PLSQL은 SQL에 내가 필요한 것을 정의하여 동작하도록 하게 함.(SQL + PL기능)
* PL 주요 특징
  + 변수, 상수 정의
  + 제어구문 사용가능(if문, loop문, go to문)
  + 예외처리
  + 모듈화

<br><br><br><br>

## 구조화된 언어
* DECLARE과 EXCEPTION은 필수가 아니지만 BEGIN과 END는 반드시 있어야함.

<br>

### DECLARE ( 선언부 )
* Optional
* 대입연산자( := )
* 변수를 정의하고 초기화하지 않으면 해당 변수를 NULL로 취급한다!

```sql
DECLARE
  V_EMPNO   NUMBER(4)     :=8888;   --변수선언 및 초기화
  V_DEPTNO  NUMBER(2);
  V_ENAME   VARCHAR2(10)  :='XMAN'; --변수선언 및 초기화
  V_JOB     VARCHAR2(9);
  V_SAL     NUMBER(7,2);
BEGIN
```

<br>

* CURSOR : IS이하의 SELECT문장만 올 수 있다.

```sql
DECLARE
  CURSOR CUR_EXP IS
        SELECT EMPNO, JOB, SAL, COMM, FROM EMP WHERE DEPTNO = 10;
  V_ENAME   VARCHAR2(10)  :='XMAN'; --변수선언 및 초기화
  V_JOB     VARCHAR2(9);
  V_SAL     NUMBER(7,2);
  V_COMM    NUMBER(7,2);
BEGIN
```

### BEGIN ( 실행부 )
* 필수요소
* PLSQL은 :=이 대입연산자, =는 비교연산자이다.
* 정형화된 구조

```sql
IF V_JOB IS NULL THEN
  V_JOB :='신입';
END IF;
IF V_JOB = '신입' THEN 
  V_SAL := 2000;
ELSIF V_JOB IN ('MANAGER', 'ANALYST') THEN
  V_SAL := 3500;
ELSE
  V_SAL := 2500;
END IF;
```

```sql
WHILE(V_INDEX >= 0)
LOOP
  DBMS_OUTPUT.PUT_LINE(' WHILE LOOP ['||TO_CHAR(V_INDEX)||']');
  -- DBMS_OUPUT : 패키지
  V_INDEX := V_INDEX -1
 END LOOP;
```

### EXCEPTION ( 예외처리 )
* Optional

```sql


```

### END;
* 필수요소

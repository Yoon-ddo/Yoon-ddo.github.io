---
title: 상태정보 유지기술 쿠키와 세션
toc: true
toc_sticky: true
toc_label: "Contents of Page"

categories:
  - Study
tags:
  - Web_Study
---

<br><br>

# 상태정보 유지기술
* 쿠키와 세션

<br><br><br><br>

# 쿠키(Cookie)
* 사용자의 컴퓨터에 클라이언트(사용자) 정보를 저장
* 서버의 부하가 분산
* 보안상의 문제가 발생할 수 있다.
* 정보저장 유효기간을 사용자가 설정한다.
  - 브라우저가 닫힌 이후에도 유지.
* 한 사이트에서 저장할 수 있는 쿠키 객체는 20개로 한정되어 있음.
* 하나의 쿠키에 저장할 수 있는 데이터는 브라우져별 한계가 있음(4k)
* 컴퓨터에 쿠키 한계치(300개)가 오게 되면 랜덤하게 저장된 쿠키가 삭제됨.
* 쿠키에 저장된 데이터 타입은 **문자열**만 가능.
* 쿠키는 웹서버가 만든다.

## 동작방식
  1. 쿠키를 웹서버가 생성 
  2. 클라이언트의 쿠키저장소에 쿠키저장
  3. 쿠키를 웹서버에 전송

### 쿠키생성

```java

<% 
  Cookie cookie = new Cookie("cName", "cValue");
  response.addCookie(cookie);
%>

```

### 쿠키객체 얻어오기

```java

Cookie[] cookies = request.getCookies();

```

## Cookie 객체 중요 API

| 메서드 | 리턴타입 | 설명 |
|:---:|:---:|---|
| getName() | String | 쿠키의 이름을 추출 |
| getValue() | String | 쿠키의 값을 추출 |

## 쿠키생성 예제

1. makeForm.jspjsp파일 생성

~~~html

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	
	<form action="set.jsp" method="post">
		쿠키이름 : <input type="text" name="cName"> <br>
		쿠키 값 : <input type="text" name="cValue"><br>
		<input type="submit" value="쿠키설정">	
	</form>
</body>
</html>

~~~

2. set.jsp 생성
  - 인코딩 후, cName, cValue getParameter()로 받아오기
  - 쿠키생성
  - 쿠키전송

~~~html

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>   
 <%
 	request.setCharacterEncoding("utf-8");
 	String cName = request.getParameter("cName");
 	String cValue = request.getParameter("cValue");
 	
 	//쿠키생성
 	Cookie cookie = new Cookie(cName, cValue);
 	
 	//쿠키전송
 	response.addCookie(cookie);
 %>
 
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	
	<h2>쿠키설정 완료</h2>
	<a href="get.jsp">설정된 쿠키조회</a>
	
</body>
</html>

~~~

3. get.jsp생성
  - 쿠키 값 받아오기
  - 쿠키 조회

~~~html

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	Cookie[] cookies = request.getCookies();

	StringBuilder sb = new StringBuilder();
	
	for(Cookie c: cookies){
		String cName = c.getName();
		String cValue = c.getValue();
		sb.append("쿠키이름 : "+ cName + ", ");
		sb.append("쿠키 값 : "+ cValue +"<br>" );
	}
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2>설정된 쿠키정보</h2>
	<%= sb.toString() %>
</body>
</html>

~~~

<br><br><br><br>

# 세션(Session)

---
title: Reflction과 Properties
toc: true
toc_sticky: true
toc_label: "Contents of Page"

categories:
  - Study
tags:
  - Servlet_Study
---

<br><br>


# AJAX
## 1. 동기와 비동기방식
* 동기방식
  - 요청 후, 응답이 올 때까지 client는 대기만 하는 것.
* 비동기방식
  - 요청 후, 응답이 올 때까지 client가 다른 Background 작업을 할 수 있는 것.
  - client는 멈추지 않고 동작

<br><br><br>

## 2. AJAX 구성 및 특징
* JavaScript
* css
* DOM
* XMLHttpRequest
  - 자바스크립트 객체
  - 대부분의 브라우저에서 지원
  - 표준 HTTP방식(GET/POST)으로 서버와 통신
  - 서버와 통신시 비동기적으로 작업
  - 기존 서버 작업 방식 사용 (Servlet, JSP, ...)
  - 응답문서 타입 : html외에 **xml**, **json**, 단순 텍스트 사용
* client의 요청을 AJAX Engine이 가로채서 대신 요청과 응답을 Http프로토콜로 처리하는 기술


<br><br><br>

## 3. AJAX프로그래밍 순서
1. 클라이언트 이벤트 발생 (ex. 버튼클릭, 텍스트 입력...)
2. XMLHttpRequest 객체 생성
3. XMLHttpRequest 객체 콜백함수 설정 ( 서버의 상태가 바뀔때마다 호출되는 함수 )
4. XMLHttpRequest 객체를 통한 비동기화 요청
5. 서버 응답결과를 생성하여 클라이언트로 전송
6. XMLHttpRequest 객체는 서버 결과를 처리할 콜백함수 호출
7. 결과를 클라이언트 화면에 

<br><br><br>

## 4. 예제
### 4-1. ajaxTest.jsp에서 버튼을 누르면 hello.jsp의 값이 날아오게 하기
- hello.jsp

~~~html

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<h1>Hello AJAX!</h1>
  
~~~

- ajaxTest

~~~html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<style>
	#msgView{
		border:1px solid red;
		height:200px;
		width: 500px;
		margin-bottom:20px;
	}
</style>

<script>
	function requestMsg(){
		// 1단계 : XMLHttpRequest객체 생성
		if(window.XMLHttpRequest)
			httpRequest = new XMLHttpRequest()
		else if(window.ActiveXObject)
			// explore버전때문에 해주는거임. 최소한의 안전장치
			httpRequest = new ActiveXObject("Microsoft.XMLHTTP")
		else
			httpRequest = null;
	
		// 2단계 : Callback함수 설정( 서버요청이 바뀔때마다 호출되는 함수 )
		/*
			httpRequest.onreadystatechage = function(){
			
			}아래와 같은 뜻
		*/
		httpRequest.onreadystatechage = responseMsg
		
		// 3단계 : 서버에 비동기 요청
		httpRequest.open('GET', 'hello.jsp',true) // 비동기방식 true
		httpRequest.send(null)
		
		
		
	}
	
	
	function responseMsg(){
		
	}
	
</script>

</head>
<body>
	<h2>서버에서 받은 메시지</h2>
	<div id="msgView">
		
	</div>
	<input type="button" value="서버에서 자료 요청" onclick="requestMsg()">

</body>
</html>
  
~~~


